# Http 캐싱


> 웹사이트의 성능을 향상시킬수 있는 Http 캐시
>

Http 캐시? 특정 요청의 응답을 저장했다가 재사용하는 것. 클라이언트가 서버에 요청을 할 필요가 없으므로 빠르게 응답해줄수 있다.

서버 입장에서도 서버 부하가 적다는 장점이 있다.

Http GET 메서드 캐싱 가능

HTTP 캐시 종류

- Private Cache
    - 웹 브라우저에 있는 캐시. 유저의 컴퓨터에만 존재. 다른 사람들이 접근할 수 없음. 사용자의 개인화된 응답 저장 가능
    - 서버의 응답에 authorization header 있는 경우, private cache에 저장되지 않는다!
- Shared Cache
    - Proxy 타입
        - 중개자 역할. 클라이언트와 서버 사이에서 http 메세지를 전달해주는 역할
        - 프록시 캐시는 개발자가 직접 제어할 수 없다. http 헤더를 통해서만 알려줄수 있다
    - Managed 타입
        - 개발자가 제어 가능
        - Reverse Proxy(Nginx) 또는 CDN(AWS의 CloudFront와 같은 클라우드 서비스)을 의미

캐시 유효기간

- 서버에서 최신 응답을 내리기 전까지는 저장(캐시)해둔 응답을 사용해야 웹 사이트 성능이 향상
- 언제까지 가지고 있어야 할까?
    - 서버에서 언제까지 가지면 좋을지 헤더에서 표시
    - `Date`, `Cache-Control`
    - max-age가 지나지 않은 경우 fresh(최신, 유효하다) 한 캐시. 지난 경우 stale (오래된, 만료). expired (http 1.1 이전에 사용. 현재는 별로 사용하지 않음)

재검증

- 유효기간이 지난 캐시를 바로 날리는가? No.
- 서버에 한번 확인하는 작업이 있다. → 유효성 검증 똔느 재검증
- 오래된 응답을 확인하는 방식
- 조건부 요청
    - if - modified -since
        - 날짜를 기준으로 확인.
        - `last-modified` 날짜를 서버가 갖고 있고, 브라우저가 `if-modified-since` 로 요청을 보내서 유효한 경우 `304 Not Modified` 응답(응답 값 없음)
        - 날짜를 기준으로 갱신해야하는지, 재검증 해야하는지
    - ETag / If-None-Match
        - tag 값을 받아 재갱신해야하는지 확인
